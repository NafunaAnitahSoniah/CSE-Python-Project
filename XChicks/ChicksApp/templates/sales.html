{% extends 'base_manager.html' %}
{% block title %}Sales | Young4ChickS{% endblock %}
{% block content %}
<header class="page-header">
    <h1>Sales</h1>
</header>
<div class="table-card fade-in">
    <h4><i class="fas fa-sack-dollar"></i> Overview</h4>
    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Sale ID</th>
                    <th>Request ID</th>
                    <th>Farmer Name</th>
                    <th>Chick Type</th>
                    <th>Quantity</th>
                    <th>Total Amount (UgSh)</th>
                    <th>Date</th>
                    <th>Recorded By</th>
                </tr>
            </thead>
            <tbody>
                {% for sale in sales %}
                <tr>
                    <td>{{ sale.sale_id }}</td>
                    <td>{{ sale.chick_request.chick_request_id }}</td>
                    <td>{{ sale.chick_request.farmer.farmer_name }}</td>
                    <td>{{ sale.chick_request.chick_type|title }}</td>
                    <td>{{ sale.chick_request.quantity }}</td>
                    <td>{{ sale.total_amount|floatformat:0 }}</td>
                    <td>{{ sale.created_at|date:'Y-m-d' }}</td>
                    <td>{{ sale.recorded_by.get_full_name|default:sale.recorded_by.username }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8">No sales records available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}