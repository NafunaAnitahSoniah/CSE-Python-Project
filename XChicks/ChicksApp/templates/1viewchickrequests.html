{% extends 'base_agent.html' %}
{% block title %}My Chick Requests | Young4ChickS{% endblock %}
{% block content %}
<header class="page-header">
    <h1>My Chick Requests</h1>
    <div class="subtitle">View and manage your submitted chick requests</div>
</header>
<section class="card fade-in">
    <h4><i class="fas fa-list"></i> Chick Requests Overview</h4>
    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Request ID</th>
                    <th>Farmer</th>
                    <th>Farmer Type</th>
                    <th>Chick Type</th>
                    <th>Chick Breed</th>
                    <th>Quantity</th>
                    
                    <th>Feed Taken</th>
                    <th>Payment Terms</th>
                    <th>Request Date</th>
                    <th>Received Through</th>
                    <th>Status</th>
                    <th>Approved On</th>
                    <th>Delivered</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for request in chick_requests %}
                <tr class="status-{{ request.status|lower }}">
                    <td data-label="Request ID">{{ request.chick_request_id }}</td>
                    <td data-label="Farmer">{{ request.farmer.farmer_name }}</td>
                    <td data-label="Farmer Type">{{ request.farmer_type }}</td>
                    <td data-label="Chick Type">{{ request.chick_type }}</td>
                    <td data-label="Chick Breed">{{ request.chick_breed }}</td>
                    <td data-label="Quantity">{{ request.quantity }}</td>
                    
                    <td data-label="Feed Taken">{{ request.feed_taken|yesno:"Yes,No" }}</td>
                    <td data-label="Payment Terms">{{ request.payment_terms }}</td>
                    <td data-label="Request Date">{{ request.request_date|date:'Y-m-d H:i' }}</td>
                    <td data-label="Received Through">{{ request.received_through }}</td>
                    <td data-label="Status">
                        <span class="badge badge-{{ request.status|lower }}">{{ request.status }}</span>
                    </td>
                    <td data-label="Approved On">{{ request.approved_on|date:'Y-m-d H:i'|default:"N/A" }}</td>
                    <td data-label="Delivered">{{ request.delivered|yesno:"Yes,No" }}</td>
                    <td data-label="Actions">
                        {% if request.status == 'pending' %}
                        <a href="/deleterequest/{{ request.id }}/" class="btn btn-danger btn-sm"><i class="fas fa-trash"></i> Delete</a>
                        {% else %}
                        <span class="text-muted">No actions</span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="15" class="text-center">No chick requests available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="card-footer">
        <a href="/addchickrequest/" class="btn btn-primary"><i class="fas fa-plus"></i> Add New Request</a>
        <a href="/salesagentdashboard/" class="btn btn-outline"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
    </div>
</section>
{% endblock %}
